{"ast":null,"code":"import ENGLISH from './i18n';\nimport RRule from '../index'; // =============================================================================\n// Parser\n// =============================================================================\n\nvar Parser =\n/** @class */\nfunction () {\n  function Parser(rules) {\n    this.done = true;\n    this.rules = rules;\n  }\n\n  Parser.prototype.start = function (text) {\n    this.text = text;\n    this.done = false;\n    return this.nextSymbol();\n  };\n\n  Parser.prototype.isDone = function () {\n    return this.done && this.symbol === null;\n  };\n\n  Parser.prototype.nextSymbol = function () {\n    var best;\n    var bestSymbol;\n    var p = this;\n    this.symbol = null;\n    this.value = null;\n\n    do {\n      if (this.done) return false;\n      var rule = void 0;\n      best = null;\n\n      for (var name_1 in this.rules) {\n        rule = this.rules[name_1];\n        var match = rule.exec(p.text);\n\n        if (match) {\n          if (best === null || match[0].length > best[0].length) {\n            best = match;\n            bestSymbol = name_1;\n          }\n        }\n      }\n\n      if (best != null) {\n        this.text = this.text.substr(best[0].length);\n        if (this.text === '') this.done = true;\n      }\n\n      if (best == null) {\n        this.done = true;\n        this.symbol = null;\n        this.value = null;\n        return;\n      } // @ts-ignore\n\n    } while (bestSymbol === 'SKIP'); // @ts-ignore\n\n\n    this.symbol = bestSymbol;\n    this.value = best;\n    return true;\n  };\n\n  Parser.prototype.accept = function (name) {\n    if (this.symbol === name) {\n      if (this.value) {\n        var v = this.value;\n        this.nextSymbol();\n        return v;\n      }\n\n      this.nextSymbol();\n      return true;\n    }\n\n    return false;\n  };\n\n  Parser.prototype.acceptNumber = function () {\n    return this.accept('number');\n  };\n\n  Parser.prototype.expect = function (name) {\n    if (this.accept(name)) return true;\n    throw new Error('expected ' + name + ' but found ' + this.symbol);\n  };\n\n  return Parser;\n}();\n\nexport default function parseText(text, language) {\n  if (language === void 0) {\n    language = ENGLISH;\n  }\n\n  var options = {};\n  var ttr = new Parser(language.tokens);\n  if (!ttr.start(text)) return null;\n  S();\n  return options;\n\n  function S() {\n    // every [n]\n    ttr.expect('every');\n    var n = ttr.acceptNumber();\n    if (n) options.interval = parseInt(n[0], 10);\n    if (ttr.isDone()) throw new Error('Unexpected end');\n\n    switch (ttr.symbol) {\n      case 'day(s)':\n        options.freq = RRule.DAILY;\n\n        if (ttr.nextSymbol()) {\n          AT();\n          F();\n        }\n\n        break;\n      // FIXME Note: every 2 weekdays != every two weeks on weekdays.\n      // DAILY on weekdays is not a valid rule\n\n      case 'weekday(s)':\n        options.freq = RRule.WEEKLY;\n        options.byweekday = [RRule.MO, RRule.TU, RRule.WE, RRule.TH, RRule.FR];\n        ttr.nextSymbol();\n        F();\n        break;\n\n      case 'week(s)':\n        options.freq = RRule.WEEKLY;\n\n        if (ttr.nextSymbol()) {\n          ON();\n          F();\n        }\n\n        break;\n\n      case 'hour(s)':\n        options.freq = RRule.HOURLY;\n\n        if (ttr.nextSymbol()) {\n          ON();\n          F();\n        }\n\n        break;\n\n      case 'minute(s)':\n        options.freq = RRule.MINUTELY;\n\n        if (ttr.nextSymbol()) {\n          ON();\n          F();\n        }\n\n        break;\n\n      case 'month(s)':\n        options.freq = RRule.MONTHLY;\n\n        if (ttr.nextSymbol()) {\n          ON();\n          F();\n        }\n\n        break;\n\n      case 'year(s)':\n        options.freq = RRule.YEARLY;\n\n        if (ttr.nextSymbol()) {\n          ON();\n          F();\n        }\n\n        break;\n\n      case 'monday':\n      case 'tuesday':\n      case 'wednesday':\n      case 'thursday':\n      case 'friday':\n      case 'saturday':\n      case 'sunday':\n        options.freq = RRule.WEEKLY;\n        var key = ttr.symbol.substr(0, 2).toUpperCase();\n        options.byweekday = [RRule[key]];\n        if (!ttr.nextSymbol()) return; // TODO check for duplicates\n\n        while (ttr.accept('comma')) {\n          if (ttr.isDone()) throw new Error('Unexpected end');\n          var wkd = decodeWKD();\n\n          if (!wkd) {\n            throw new Error('Unexpected symbol ' + ttr.symbol + ', expected weekday');\n          } // @ts-ignore\n\n\n          options.byweekday.push(RRule[wkd]);\n          ttr.nextSymbol();\n        }\n\n        MDAYs();\n        F();\n        break;\n\n      case 'january':\n      case 'february':\n      case 'march':\n      case 'april':\n      case 'may':\n      case 'june':\n      case 'july':\n      case 'august':\n      case 'september':\n      case 'october':\n      case 'november':\n      case 'december':\n        options.freq = RRule.YEARLY;\n        options.bymonth = [decodeM()];\n        if (!ttr.nextSymbol()) return; // TODO check for duplicates\n\n        while (ttr.accept('comma')) {\n          if (ttr.isDone()) throw new Error('Unexpected end');\n          var m = decodeM();\n\n          if (!m) {\n            throw new Error('Unexpected symbol ' + ttr.symbol + ', expected month');\n          }\n\n          options.bymonth.push(m);\n          ttr.nextSymbol();\n        }\n\n        ON();\n        F();\n        break;\n\n      default:\n        throw new Error('Unknown symbol');\n    }\n  }\n\n  function ON() {\n    var on = ttr.accept('on');\n    var the = ttr.accept('the');\n    if (!(on || the)) return;\n\n    do {\n      var nth = decodeNTH();\n      var wkd = decodeWKD();\n      var m = decodeM(); // nth <weekday> | <weekday>\n\n      if (nth) {\n        // ttr.nextSymbol()\n        if (wkd) {\n          ttr.nextSymbol();\n          if (!options.byweekday) options.byweekday = []; // @ts-ignore\n\n          options.byweekday.push(RRule[wkd].nth(nth));\n        } else {\n          if (!options.bymonthday) options.bymonthday = []; // @ts-ignore\n\n          options.bymonthday.push(nth);\n          ttr.accept('day(s)');\n        } // <weekday>\n\n      } else if (wkd) {\n        ttr.nextSymbol();\n        if (!options.byweekday) options.byweekday = []; // @ts-ignore\n\n        options.byweekday.push(RRule[wkd]);\n      } else if (ttr.symbol === 'weekday(s)') {\n        ttr.nextSymbol();\n\n        if (!options.byweekday) {\n          options.byweekday = [RRule.MO, RRule.TU, RRule.WE, RRule.TH, RRule.FR];\n        }\n      } else if (ttr.symbol === 'week(s)') {\n        ttr.nextSymbol();\n        var n = ttr.acceptNumber();\n\n        if (!n) {\n          throw new Error('Unexpected symbol ' + ttr.symbol + ', expected week number');\n        }\n\n        options.byweekno = [parseInt(n[0], 10)];\n\n        while (ttr.accept('comma')) {\n          n = ttr.acceptNumber();\n\n          if (!n) {\n            throw new Error('Unexpected symbol ' + ttr.symbol + '; expected monthday');\n          }\n\n          options.byweekno.push(parseInt(n[0], 10));\n        }\n      } else if (m) {\n        ttr.nextSymbol();\n        if (!options.bymonth) options.bymonth = []; // @ts-ignore\n\n        options.bymonth.push(m);\n      } else {\n        return;\n      }\n    } while (ttr.accept('comma') || ttr.accept('the') || ttr.accept('on'));\n  }\n\n  function AT() {\n    var at = ttr.accept('at');\n    if (!at) return;\n\n    do {\n      var n = ttr.acceptNumber();\n\n      if (!n) {\n        throw new Error('Unexpected symbol ' + ttr.symbol + ', expected hour');\n      }\n\n      options.byhour = [parseInt(n[0], 10)];\n\n      while (ttr.accept('comma')) {\n        n = ttr.acceptNumber();\n\n        if (!n) {\n          throw new Error('Unexpected symbol ' + ttr.symbol + '; expected hour');\n        }\n\n        options.byhour.push(parseInt(n[0], 10));\n      }\n    } while (ttr.accept('comma') || ttr.accept('at'));\n  }\n\n  function decodeM() {\n    switch (ttr.symbol) {\n      case 'january':\n        return 1;\n\n      case 'february':\n        return 2;\n\n      case 'march':\n        return 3;\n\n      case 'april':\n        return 4;\n\n      case 'may':\n        return 5;\n\n      case 'june':\n        return 6;\n\n      case 'july':\n        return 7;\n\n      case 'august':\n        return 8;\n\n      case 'september':\n        return 9;\n\n      case 'october':\n        return 10;\n\n      case 'november':\n        return 11;\n\n      case 'december':\n        return 12;\n\n      default:\n        return false;\n    }\n  }\n\n  function decodeWKD() {\n    switch (ttr.symbol) {\n      case 'monday':\n      case 'tuesday':\n      case 'wednesday':\n      case 'thursday':\n      case 'friday':\n      case 'saturday':\n      case 'sunday':\n        return ttr.symbol.substr(0, 2).toUpperCase();\n\n      default:\n        return false;\n    }\n  }\n\n  function decodeNTH() {\n    switch (ttr.symbol) {\n      case 'last':\n        ttr.nextSymbol();\n        return -1;\n\n      case 'first':\n        ttr.nextSymbol();\n        return 1;\n\n      case 'second':\n        ttr.nextSymbol();\n        return ttr.accept('last') ? -2 : 2;\n\n      case 'third':\n        ttr.nextSymbol();\n        return ttr.accept('last') ? -3 : 3;\n\n      case 'nth':\n        var v = parseInt(ttr.value[1], 10);\n        if (v < -366 || v > 366) throw new Error('Nth out of range: ' + v);\n        ttr.nextSymbol();\n        return ttr.accept('last') ? -v : v;\n\n      default:\n        return false;\n    }\n  }\n\n  function MDAYs() {\n    ttr.accept('on');\n    ttr.accept('the');\n    var nth = decodeNTH();\n    if (!nth) return;\n    options.bymonthday = [nth];\n    ttr.nextSymbol();\n\n    while (ttr.accept('comma')) {\n      nth = decodeNTH();\n\n      if (!nth) {\n        throw new Error('Unexpected symbol ' + ttr.symbol + '; expected monthday');\n      }\n\n      options.bymonthday.push(nth);\n      ttr.nextSymbol();\n    }\n  }\n\n  function F() {\n    if (ttr.symbol === 'until') {\n      var date = Date.parse(ttr.text);\n      if (!date) throw new Error('Cannot parse until date:' + ttr.text);\n      options.until = new Date(date);\n    } else if (ttr.accept('for')) {\n      options.count = parseInt(ttr.value[0], 10);\n      ttr.expect('number'); // ttr.expect('times')\n    }\n  }\n}","map":{"version":3,"mappings":"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","names":["ENGLISH","RRule","rules","Parser","text","done","nextSymbol","symbol","best","bestSymbol","p","value","rule","name_1","match","exec","length","substr","name","v","accept","Error","parseText","language","options","ttr","tokens","start","S","expect","n","acceptNumber","interval","parseInt","isDone","freq","DAILY","AT","F","WEEKLY","byweekday","MO","TU","WE","TH","FR","ON","HOURLY","MINUTELY","MONTHLY","YEARLY","key","toUpperCase","wkd","decodeWKD","push","MDAYs","bymonth","decodeM","m","on","the","nth","decodeNTH","bymonthday","byweekno","at","byhour","date","Date","parse","until","count"],"sources":["../../../../src/nlp/parsetext.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}